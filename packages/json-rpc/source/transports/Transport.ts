// Needs to differentiate different kinds of connections client/server/both
// Needs to support middleware for encryption, auth
